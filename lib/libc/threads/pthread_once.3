.\"
.\" Copyright (c) 1996 Berkeley Software Design, Inc. All rights reserved.
.\" The Berkeley Software Design Inc. software License Agreement specifies
.\" the terms and conditions for redistribution.
.\"
.\" BSDI pthread_once.3,v 1.3 1996/12/12 03:03:46 donn Exp
.\" 
.Dd June 3, 1996
.Dt PTHREAD_ONCE 3
.Os BSD 4
.Sh NAME
.Nm pthread_once
.Nd execute a function at most once
.Sh SYNOPSIS
.Fd #include <pthread.h>
.Ft int
.Fn pthread_once "pthread_once_t *once_control" "void (*init_routine)(void)"
.Pp
.Va pthread_once_t once_control = PTHREAD_ONCE_INIT;
.Sh DESCRIPTION
.Pp
This interface is defined by
.St -p1003.1c .
.Pp
The 
.Fn pthread_once
function causes the the function passed as 
.Fa init_routine
to be executed at most one time in the life of a program.  The
initialization state is maintained in 
.Fa once_control .
The behavior of 
.Fn pthread_once 
is undefined if 
.Fa once_control 
has automatic storage class or is not initialized with
.Dv PTHREAD_ONCE_INIT.
.Pp
The intent of
.Fn pthread_once 
is that it be used to initialize a routine package dynamically
at run time in a thread-safe manner.  
.Fn Pthread_once
performs sufficient locking to guarantee that at most one thread
executes 
.Fa init_routine .
.Sh RETURN VALUES
The 
.Fn pthread_once
function returns 0 upon successful completion.  If an error occurs, a 
non-zero error value is returned.
.Sh ERRORS
The
.Nm pthread_once
function may fail and return the following error:
.Bl -tag -width Er
.It Bq Er EINVAL
An invalid parameter was passed as an argument to 
.Fn pthread_once .
.El
.Sh SEE ALSO
.Xr pthreads 3 ,
.Xr pthread_create 3 ,
.Xr pthread_exit 3
.Sh STANDARDS
The
.Nm pthread_once
function conforms to
.St -p1003.1c .
.Sh HISTORY
The
.Nm pthread_once
function first appeared in BSD/OS 3.0.
